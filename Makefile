deploy:
	vsql -U dbadmin -X -f fmt.sql
	@echo " \
		GRANT EXECUTE ON FUNCTION FMT(n NUMERIC) TO PUBLIC; \
		GRANT EXECUTE ON FUNCTION FMT(n NUMERIC, d INTEGER) TO PUBLIC; \
		GRANT EXECUTE ON FUNCTION FMT(n NUMERIC, d INTEGER, f VARCHAR) TO PUBLIC; \
	" | vsql -U dbadmin  -X -f - -e
test: 
	@echo " \
		SELECT FMT(-1234); \
		SELECT FMT(-1234567890); \
		SELECT FMT(1234567890.98765); \
		SELECT FMT(1234567890.98765, 3); \
		SELECT FMT(1234567890.98765, 3, 'N'); \
		SELECT FMT(-1234566666666666677777777777777778888888888888889999999999999999.7896543); \
		SELECT FMT(-1234566666666666677777777777777778888888888888889999999999999999.7896543, 4, 'N'); \
		SELECT FMT(0.1234, 0, 'P'); \
		SELECT FMT(0.1234621, 2, 'P'); \
		SELECT FMT(0.00345432, 3, 'T'); \
		SELECT FMT(126.987654, 3, 'P'); \
	" | vsql -U dbadmin  -X -f - -e
clean:
	@echo " \
		DROP FUNCTION FMT(n NUMERIC) ; \
		DROP FUNCTION FMT(n NUMERIC, d INTEGER) ; \
		DROP FUNCTION FMT(n NUMERIC, d INTEGER, f VARCHAR) ; \
	" | vsql -U dbadmin  -X -f - -e
